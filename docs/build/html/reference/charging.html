
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Charging &#8212; hive  documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">hive  documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-hive.charging">
<span id="charging"></span><h1>Charging<a class="headerlink" href="#module-hive.charging" title="Permalink to this headline">¶</a></h1>
<p>Functions for estimating charge curves</p>
<dl class="function">
<dt id="hive.charging.calc_const_charge_kwh">
<code class="sig-prename descclassname">hive.charging.</code><code class="sig-name descname">calc_const_charge_kwh</code><span class="sig-paren">(</span><em class="sig-param">time_s</em>, <em class="sig-param">kw=6.6</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hive/charging.html#calc_const_charge_kwh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hive.charging.calc_const_charge_kwh" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the energy (in kWh) added to battery in time_s seconds at
constant power, kw (default=6.6).</p>
<dl class="simple">
<dt>time_s: double precision</dt><dd><p>Seconds of charging</p>
</dd>
<dt>kw: double precision</dt><dd><p>Constant power received by battery, in kW (default: 6.6)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>kWh added to battery in time_s seconds</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>double precision</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_const_charge_kwh</span><span class="p">(</span><span class="mi">7200</span><span class="p">)</span>
<span class="go">13.2</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="hive.charging.calc_const_charge_secs">
<code class="sig-prename descclassname">hive.charging.</code><code class="sig-name descname">calc_const_charge_secs</code><span class="sig-paren">(</span><em class="sig-param">init_energy_kwh</em>, <em class="sig-param">battery_capacity_kwh</em>, <em class="sig-param">kw=6.6</em>, <em class="sig-param">soc_f=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hive/charging.html#calc_const_charge_secs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hive.charging.calc_const_charge_secs" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the time (in seconds) to charge from init_energy_kwh to
battery_capacity_kwh * soc_f at constant power, kw (default=6.6).</p>
<dl class="simple">
<dt>init_energy_kwh: double precision</dt><dd><p>Initial battery kWh</p>
</dd>
<dt>battery_capacity_kwh: double precision</dt><dd><p>Battery capacity, in kWh</p>
</dd>
<dt>kw: double precision</dt><dd><p>Constant power received by battery, in kW (default: 6.6)</p>
</dd>
<dt>soc_f: double precision</dt><dd><p>Fractional battery state of charge at completion of charge (default: 1.0)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Seconds needed to charge from init_energy_kwh -&gt; battery_capacity_kwh * soc_f</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>double precision</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_const_charge_secs</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
<span class="go">9818.181818</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="hive.charging.calc_dcfc_kwh">
<code class="sig-prename descclassname">hive.charging.</code><code class="sig-name descname">calc_dcfc_kwh</code><span class="sig-paren">(</span><em class="sig-param">charge_template</em>, <em class="sig-param">battery_kwh</em>, <em class="sig-param">battery_kw</em>, <em class="sig-param">soc_i</em>, <em class="sig-param">charge_time</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hive/charging.html#calc_dcfc_kwh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hive.charging.calc_dcfc_kwh" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates energy added to the battery over a given charge duration, for a
DC fast charging event at a specified average power. The function uses assumptions
to create a realistic charge profile with power tapering at higer SOC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>charge_template</strong> (<em>pd.DataFrame</em>) – veh charge template from construct_temporal_charge_template()</p></li>
<li><p><strong>battery_kwh</strong> (<em>double precision</em>) – Battery capacity, in kWh</p></li>
<li><p><strong>battery_kw</strong> (<em>double precision</em>) – Maximum power that cna be received by battery, in kW</p></li>
<li><p><strong>soc_i</strong> (<em>double precision</em>) – Initial battery state of charge, in percent (0 to 100)</p></li>
<li><p><strong>charge_time</strong> (<em>double precision</em>) – Charge event duration, in seconds</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Energy added to the battery in the give time_s, kilowatt-hours</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="hive.charging.calc_dcfc_secs">
<code class="sig-prename descclassname">hive.charging.</code><code class="sig-name descname">calc_dcfc_secs</code><span class="sig-paren">(</span><em class="sig-param">charge_template</em>, <em class="sig-param">battery_kwh</em>, <em class="sig-param">battery_kw</em>, <em class="sig-param">soc_i</em>, <em class="sig-param">soc_f</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hive/charging.html#calc_dcfc_secs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hive.charging.calc_dcfc_secs" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates time required to charge from initial to final soc, for a
DC fast charging event. The function uses assumptions to create a realistic
charge profile with power tapering at higer SOC.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>charge_template</strong> (<em>pd.DataFrame</em>) – veh charge template from construct_temporal_charge_template()</p></li>
<li><p><strong>battery_kwh</strong> (<em>double precision</em>) – Battery capacity, in kWh</p></li>
<li><p><strong>battery_kw</strong> (<em>double precision</em>) – Maximum power that can be received by battery, in kW</p></li>
<li><p><strong>soc_i</strong> (<em>double precision</em>) – Initial battery state of charge, in percent (0 to 100)</p></li>
<li><p><strong>soc_i</strong> – Initial battery state of charge, in percent (0 to 100)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Energy added to the battery in the give time_s, kilowatt-hours</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="hive.charging.construct_charge_profile">
<code class="sig-prename descclassname">hive.charging.</code><code class="sig-name descname">construct_charge_profile</code><span class="sig-paren">(</span><em class="sig-param">charge_template</em>, <em class="sig-param">soc_i</em>, <em class="sig-param">charge_time=-1</em>, <em class="sig-param">soc_f=-1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hive/charging.html#construct_charge_profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hive.charging.construct_charge_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects a portion of the scaled charging template that applies to a
particular charge event based on initial conditions and event duration or
final state of charge. The function determines the appropriate calculation
based on the set of inputs provided.</p>
<dl class="simple">
<dt>charge_template: DataFrame</dt><dd><p>Scaled charging template based on the input template, containing
columns: [time_i, soc_i, kwh_i, kw, soc_f, kwh_f]</p>
</dd>
<dt>soc_i: double precision</dt><dd><p>Initial battery state of charge, in percent (0 to 100)</p>
</dd>
<dt>charge_time: double precision</dt><dd><p>Charge event duration, in seconds (default = -1)</p>
</dd>
<dt>soc_f: double precision</dt><dd><p>Final state of charge, in percent (0 to 100, default = -1)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The portion of the charge_template input DataFrame that characterizes
the charging event described by the input conditions. ‘abs_time’ column
is appended to the dataframe as well.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PATH_TO_LEAF</span> <span class="o">=</span> <span class="s1">&#39;../inputs/.lib/raw_leaf_curves.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">PATH_TO_LEAF</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scaled_df</span> <span class="o">=</span> <span class="n">construct_temporal_charge_template</span><span class="p">(</span><span class="n">leaf_df</span><span class="p">,</span>
<span class="go">                                       battery_kwh = 30,</span>
<span class="go">                                       battery_kw = 100)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">construct_charge_profile</span><span class="p">(</span><span class="n">scaled_df</span><span class="p">,</span>
<span class="go">                             soc_i = 20,</span>
<span class="go">                             soc_f = 80)</span>
</pre></div>
</div>
<blockquote>
<div><p>time_i      soc_i     kwh_i         kw      soc_f     kwh_f  abs_time</p>
</div></blockquote>
<p>293     294  20.028729  6.008619  86.258619  20.108598  6.032579         0
294     295  20.108598  6.032579  86.282579  20.188489  6.056547         1
295     296  20.188489  6.056547  86.306547  20.268403  6.080521         2
296     297  20.268403  6.080521  86.330521  20.348338  6.104501         3
297     298  20.348338  6.104501  86.354501  20.428296  6.128489         4</p>
</dd></dl>

<dl class="function">
<dt id="hive.charging.construct_temporal_charge_template">
<code class="sig-prename descclassname">hive.charging.</code><code class="sig-name descname">construct_temporal_charge_template</code><span class="sig-paren">(</span><em class="sig-param">unscaled_df</em>, <em class="sig-param">battery_kwh</em>, <em class="sig-param">battery_kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hive/charging.html#construct_temporal_charge_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hive.charging.construct_temporal_charge_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a scaled charging template based on battery specifications.
The original template is for a Nissan Leaf and was provided by Idaho
National Laboratory.</p>
<dl class="simple">
<dt>unscaled_df: DataFrame</dt><dd><p>The DataFrame describes the charge template (likely from Nissan Leaf)
with columns [soc, kw]. Presently the source file for that profile is
here: ‘../inputs/.lib/raw_leaf_curves.csv’</p>
</dd>
<dt>battery_kwh: double precision</dt><dd><p>Battery capacity, in kWh</p>
</dd>
<dt>battery_kw: double precision</dt><dd><p>Maximum power that cna be received by battery, in kW</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Scaled charging template based on the input template, containing
columns: [time_i, soc_i, kwh_i, kw, soc_f, kwh_f]</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>DataFrame</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">PATH_TO_LEAF</span> <span class="o">=</span> <span class="s1">&#39;../inputs/library/.static/raw_leaf_curves.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">leaf_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">PATH_TO_LEAF</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">construct_temporal_charge_template</span><span class="p">(</span><span class="n">leaf_df</span><span class="p">,</span>
<span class="go">                                       battery_kwh = 30,</span>
<span class="go">                                       battery_kw = 100)</span>
</pre></div>
</div>
<blockquote>
<div><p>time_i      soc_i      kwh_i         kw      soc_f      kwh_f</p>
</div></blockquote>
<p>0          1   0.000000   0.000000  20.000000   0.018519   0.005556
1          2   0.018519   0.005556  20.430222   0.037435   0.011231
2          3   0.037435   0.011231  20.869699   0.056759   0.017028
3          4   0.056759   0.017028  21.318629   0.076499   0.022950
4          5   0.076499   0.022950  21.777217   0.096663   0.028999</p>
<blockquote>
<div><p>…</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="hive.charging.query_charge_stats">
<code class="sig-prename descclassname">hive.charging.</code><code class="sig-name descname">query_charge_stats</code><span class="sig-paren">(</span><em class="sig-param">charge_template</em>, <em class="sig-param">soc_i</em>, <em class="sig-param">charge_time=-1</em>, <em class="sig-param">soc_f=-1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/hive/charging.html#query_charge_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hive.charging.query_charge_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Function needs docstring</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/charging.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">hive  documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Brennan Borlaug, Nicholas Reinicke, Matt Moniot, Jacob Holden, Clement Rames.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>